{#-
  This file was automatically generated - do not edit
-#}
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">

      {% set pagetags = ' tags:' ~ (page.meta.tags | join(' ') | replace('DHIS core version ','') | replace(' ',' tags:')) if page.meta and page.meta.tags else '' %}

      <input type="text" class="md-search__input" id="squery" filter="{{ pagetags }}" name="query" aria-label="{{ lang.t('search.placeholder') }}" placeholder="{{ lang.t('search.placeholder') }}" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        {% include ".icons/material/magnify.svg" %}
        {% include ".icons/material/arrow-left.svg" %}
      </label>
      <nav class="md-search__options" aria-label="{{ lang.t('search') }}">
        {% if "search.share" in features %}
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="{{ lang.t('search.share') }}" aria-label="{{ lang.t('search.share') }}" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            {% include ".icons/material/share-variant.svg" %}
          </a>
        {% endif %}
        <button type="reset" class="md-search__icon md-icon" title="{{ lang.t('search.reset') }}" aria-label="{{ lang.t('search.reset') }}" tabindex="-1">
          {% include ".icons/material/close.svg" %}
        </button>
      </nav>
      {% if "search.suggest" in features %}
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      {% endif %}
    </form>
    <div class="md-search__output"> 
             <div class="md-search-filter">
      <div class="md-chips">
        versions:
        {% for version in config.theme.filter.versions %}
        <button class="d2-search-filter" onclick="updateSFilter(this, '{{ version }}')">{{ version }}</button>
        {% endfor %}

        <br>
        categories:
        {% for category in config.theme.filter.categories %}
        <button class="d2-search-filter" onclick="updateSFilter(this, '{{ category }}')">{{ category }}</button>
        {% endfor %}
        
      </div>
    </div>
      <div class="md-search__scrollwrap" data-md-scrollfix>

           <div class="md-search-result" data-md-component="search-result">

          <div class="md-search-result__meta">
            {{ lang.t("search.result.initializer") }}
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  function updateSFilter(but, m) {

    var element = document.getElementById('squery');
    var current = element.getAttribute('filter');
    var excl = ' -tags:'+m;
    var incl = ' +tags:'+m;
    var newf = "";

    if (but.classList.contains('include')) {
      // next state is exclude
      but.classList.toggle('include');
      but.classList.toggle('exclude');
      newf = current.replace(incl,'') + excl;
    }
    else if (but.classList.contains('exclude')) {
      // next state is removed
      but.classList.toggle('exclude');
      newf = current.replace(excl,'');

    }
    else {
      // next state is include
      but.classList.toggle('include');
      newf = current + incl;
    }

    element.setAttribute('filter', newf);
    var v = element.value;
    element.value = v;
    element.focus();
  }

  </script>